{"version":3,"sources":["withVisionCamera.ts"],"names":["withPlugins","AndroidConfig","createRunOncePlugin","withDisableFrameProcessorsAndroid","withDisableFrameProcessorsIOS","pkg","require","CAMERA_USAGE","MICROPHONE_USAGE","withCamera","config","props","ios","infoPlist","NSCameraUsageDescription","cameraPermissionText","enableMicrophonePermission","NSMicrophoneUsageDescription","microphonePermissionText","androidPermissions","push","disableFrameProcessors","Permissions","withPermissions","name","version"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,aAAtB,EAAmDC,mBAAnD,QAA8E,sBAA9E;AACA,SAASC,iCAAT,QAAkD,qCAAlD;AACA,SAASC,6BAAT,QAA8C,iCAA9C,C,CACA;;AACA,MAAMC,GAAG,GAAGC,OAAO,CAAC,uBAAD,CAAnB;;AAEA,MAAMC,YAAY,GAAG,6CAArB;AACA,MAAMC,gBAAgB,GAAG,iDAAzB;;AASA,MAAMC,UAA+B,GAAG,UAACC,MAAD,EAAwB;AAAA;;AAAA,MAAfC,KAAe,uEAAP,EAAO;AAC9D,MAAID,MAAM,CAACE,GAAP,IAAc,IAAlB,EAAwBF,MAAM,CAACE,GAAP,GAAa,EAAb;AACxB,MAAIF,MAAM,CAACE,GAAP,CAAWC,SAAX,IAAwB,IAA5B,EAAkCH,MAAM,CAACE,GAAP,CAAWC,SAAX,GAAuB,EAAvB;AAClCH,EAAAA,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBC,wBAArB,oCACEH,KAAK,CAACI,oBADR,yEACiCL,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBC,wBADtD,uCACyGP,YADzG;;AAEA,MAAII,KAAK,CAACK,0BAAV,EAAsC;AAAA;;AACpCN,IAAAA,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBI,4BAArB,qCACEN,KAAK,CAACO,wBADR,yEACqCR,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBI,4BAD1D,yCACiHT,gBADjH;AAED;;AACD,QAAMW,kBAAkB,GAAG,CAAC,2BAAD,CAA3B;AACA,MAAIR,KAAK,CAACK,0BAAV,EAAsCG,kBAAkB,CAACC,IAAnB,CAAwB,iCAAxB;;AAEtC,MAAIT,KAAK,CAACU,sBAAV,EAAkC;AAChCX,IAAAA,MAAM,GAAGP,iCAAiC,CAACO,MAAD,CAA1C;AACAA,IAAAA,MAAM,GAAGN,6BAA6B,CAACM,MAAD,CAAtC;AACD;;AAED,SAAOV,WAAW,CAACU,MAAD,EAAS,CAAC,CAACT,aAAa,CAACqB,WAAd,CAA0BC,eAA3B,EAA4CJ,kBAA5C,CAAD,CAAT,CAAlB;AACD,CAlBD;;AAoBA,eAAejB,mBAAmB,CAACO,UAAD,EAAaJ,GAAG,CAACmB,IAAjB,EAAuBnB,GAAG,CAACoB,OAA3B,CAAlC","sourcesContent":["import { withPlugins, AndroidConfig, ConfigPlugin, createRunOncePlugin } from '@expo/config-plugins';\nimport { withDisableFrameProcessorsAndroid } from './withDisableFrameProcessorsAndroid';\nimport { withDisableFrameProcessorsIOS } from './withDisableFrameProcessorsIOS';\n// eslint-disable-next-line @typescript-eslint/no-var-requires, @typescript-eslint/no-unsafe-assignment\nconst pkg = require('../../../package.json');\n\nconst CAMERA_USAGE = 'Allow $(PRODUCT_NAME) to access your camera';\nconst MICROPHONE_USAGE = 'Allow $(PRODUCT_NAME) to access your microphone';\n\ntype Props = {\n  cameraPermissionText?: string;\n  enableMicrophonePermission?: boolean;\n  microphonePermissionText?: string;\n  disableFrameProcessors?: boolean;\n};\n\nconst withCamera: ConfigPlugin<Props> = (config, props = {}) => {\n  if (config.ios == null) config.ios = {};\n  if (config.ios.infoPlist == null) config.ios.infoPlist = {};\n  config.ios.infoPlist.NSCameraUsageDescription =\n    props.cameraPermissionText ?? (config.ios.infoPlist.NSCameraUsageDescription as string | undefined) ?? CAMERA_USAGE;\n  if (props.enableMicrophonePermission) {\n    config.ios.infoPlist.NSMicrophoneUsageDescription =\n      props.microphonePermissionText ?? (config.ios.infoPlist.NSMicrophoneUsageDescription as string | undefined) ?? MICROPHONE_USAGE;\n  }\n  const androidPermissions = ['android.permission.CAMERA'];\n  if (props.enableMicrophonePermission) androidPermissions.push('android.permission.RECORD_AUDIO');\n\n  if (props.disableFrameProcessors) {\n    config = withDisableFrameProcessorsAndroid(config);\n    config = withDisableFrameProcessorsIOS(config);\n  }\n\n  return withPlugins(config, [[AndroidConfig.Permissions.withPermissions, androidPermissions]]);\n};\n\nexport default createRunOncePlugin(withCamera, pkg.name, pkg.version);\n"]}